#include <stdio.h>
#include <signal.h>
#include <unistd.h>
#include <stdlib.h>

void handle(int signal);

int main(){
 
  signal(SIGUSR1, handle);
  signal(SIGUSR2, handle);
  if(pid=fork()){
    while(1){
      pause();
      printf("father woke up");
      sleep(1);
      kill(pid,SIGUSR1);
    }
  }else
    {
      while(1){
	printf("child woke up");
	sleep();
	kill(getppid(), SIGUSR2);
	pause();
      }
    }
  return 0;
}

void handle(int signal){
  if(signal==SIGUSR1) //printf("Catturato segnale USR1");
  else
    if(signal==SIGUSR2) //printf("Catturato segnale USR2");
    else printf("Catturato segnale non valido");
  return;
}
